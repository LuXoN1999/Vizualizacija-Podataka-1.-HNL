<!DOCTYPE html>
<html>

<head>
    <title>NK Rijeka Stats</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="./teams.js"></script>
    <script src="./mainVariables.js"></script>
    <style>
        body {
            background-color: white;
        }
    </style>

</head>

<body>

</body>
<script>
    var currentTeamIndex = 3;
    var color = ["#b5a6a5", "black"];

    var arc = d3.arc()
        .innerRadius(innerRadius)
        .outerRadius(outerRadius);

    var svg = d3.select("body")
        .append("svg")
        .attr("width", svgWidth)
        .attr("height", svgHeight)
        .style("border-radius", defaultBorderRadius)
        .style("background-color", "#808080")
        .style("opacity", 0.75);

    var clubImage = svg.append("image")
        .attr("x", clubEmblemX)
        .attr("y", clubEmblemY)
        .attr("width", clubEmblemWidth)
        .attr("height", clubEmblemHeight)
        .attr("xlink:href", "./Images/NKRijeka.png");

    var clubNameText = svg.append("text")
        .text(teamsData[currentTeamIndex].name)
        .attr("x", clubHeaderTextX)
        .attr("y", clubHeaderTextY)
        .style("font-size", headerTextFontSize)
        .style("font-family", defaultFontFamily);

    var WDLText = svg.append("text")
        .text("Pobjede/Neriješeno/Porazi")
        .attr("x", WDLTextX)
        .attr("y", commonTextY)
        .style("font-size", normalTextFontSize)
        .style("font-family", defaultFontFamily);

    var playersText = svg.append("text")
        .text("Igrači: " + (teamsData[currentTeamIndex].totalplayers).toString())
        .attr("x", playersTextX)
        .attr("y", commonTextY)
        .style("font-size", normalTextFontSize)
        .style("font-family", defaultFontFamily);

    var nationalTeamPlayersText = svg.append("text")
        .text("Reprezentativci: " + teamsData[currentTeamIndex].nationalteamplayers)
        .attr("x", playersTextX - 175)
        .attr("y", commonTextY + 50)
        .style("font-size", smallTextFontSize)
        .style("font-family", defaultFontFamily);


    var foreignPlayersText = svg.append("text")
        .text("Stranci: " + teamsData[currentTeamIndex].foreignplayers)
        .attr("x", playersTextX - 175)
        .attr("y", commonTextY + 275)
        .style("font-size", smallTextFontSize)
        .style("font-family", defaultFontFamily);

    var pie = d3.pie()
        .value(function (d, i) {
            if (i == 0) {
                return teamsData[currentTeamIndex].nationalteamplayers;
            }
            else if (i == 1) {
                return teamsData[currentTeamIndex].totalplayers - teamsData[currentTeamIndex].nationalteamplayers;
            }
            else {
                return 0;
            }
        });

    svg.selectAll("g.pie")
        .data(pie(teamsData))
        .enter()
        .append("path")
        .attr("transform", "translate(" + commonPieChartX + ", " + upperPieChartY + ")")
        .attr("d", arc)
        .attr("fill", function (d, i) {
            if (teamsData[currentTeamIndex].nationalteamplayers > teamsData[currentTeamIndex].totalplayers / 2) {
                if (i == 0) {
                    return color[0];
                }
                return color[1];
            }
            else {
                if (i == 0) {
                    return color[1];
                }
                return color[0];
            }
        });

    var pie2 = d3.pie()
        .value(function (d, i) {
            if (i == 0) {
                return teamsData[currentTeamIndex].foreignplayers;
            }
            else if (i == 1) {
                return teamsData[currentTeamIndex].totalplayers - teamsData[currentTeamIndex].foreignplayers;
            }
            else {
                return 0;
            }
        });

    svg.selectAll("g.pie")
        .data(pie2(teamsData))
        .enter()
        .append("path")
        .attr("transform", "translate(" + commonPieChartX + ", " + lowerPieChartY + ")")
        .attr("d", arc)
        .attr("fill", function (d, i) {
            if (teamsData[currentTeamIndex].foreignplayers > teamsData[currentTeamIndex].totalplayers / 2) {
                if (i == 0) {
                    return color[0];
                }
                return color[1];
            }
            else {
                if (i == 0) {
                    return color[1];
                }
                return color[0];
            }
        });

</script>


</html>